<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="singlecellviz">
<title>Development • singlecellviz</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Development">
<meta property="og:description" content="singlecellviz">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">singlecellviz</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/usage.html">Usage</a>
    <a class="dropdown-item" href="../articles/database.html">Database</a>
    <a class="dropdown-item" href="../articles/development.html">Development</a>
    <a class="dropdown-item" href="../articles/deployment.html">Deployment</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/metzger-chambon/singlecellviz/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Development</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/metzger-chambon/singlecellviz/blob/HEAD/vignettes/development.Rmd" class="external-link"><code>vignettes/development.Rmd</code></a></small>
      <div class="d-none name"><code>development.Rmd</code></div>
    </div>

    
    
<p>The following documentation assumes you have basic notions of how to
build a RShiny app. Follow the documentations of <a href="https://shiny.posit.co/" class="external-link">RShiny</a> and <a href="https://mastering-shiny.org/" class="external-link">Mastering Shiny</a> for more
explanations on Shiny, and for some practical examples.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of SingleCellViz in the
folder of your choice like so:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="co"># in bash Terminal</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="fu">git</span> clone git@github.com:metzger-chambon/singlecellviz.git</span></code></pre></div>
<p>or alternatively create a new R project using the GUI of RStudio (by
clicking on the top-right R icon in a blue box), which is the Project
menu. Select the “Version Control” way of creating a project, then
“Git”, and finally type in the repository url: <a href="https://github.com/metzger-chambon/singlecellviz.git" class="external-link uri">https://github.com/metzger-chambon/singlecellviz.git</a>.</p>
<p>In either case, you will be working inside a R project. Check out the
<a href="https://support.posit.co/hc/en-us/articles/200526207-Using-RStudio-Projects" class="external-link">doc
about using R projects</a>. An important thing to remember when
developing is that you should always have the root of this R project as
you working directory (<code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd()</a></code> and <code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd()</a></code>).
Moreover, everything you refer to while developing should be relative to
your working directory.</p>
<div class="section level3">
<h3 id="r-environment">R environment<a class="anchor" aria-label="anchor" href="#r-environment"></a>
</h3>
<p>You should first check that you have the same version of R (also
written at the very top of <code>renv.lock</code> file).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">R.version.string</span></span>
<span><span class="co">#&gt; [1] "R version 4.3.2 (2023-10-31)"</span></span></code></pre></div>
<p>You will need to install the required packages and their
dependencies. This can easily be done using renv R package, by running
the following:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">renv</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/renv/reference/init.html" class="external-link">init</a></span><span class="op">(</span><span class="op">)</span> </span>
<span><span class="co"># Select Answer 1: Restore the project from the lockfile.</span></span></code></pre></div>
<p>Check out <a href="https://rstudio.github.io/renv/articles/renv.html" class="external-link">renv
documentation</a> and section <a href="#using-renv">Using renv</a> for
more information on how this works.</p>
<p>You can also find necessary packages and suggested packages in the
DESCRIPTION file (respectively under <code>Imports</code> field and
<code>Suggests</code> field). In particular, suggested packages are
useful when developing the app.</p>
</div>
</div>
<div class="section level2">
<h2 id="running-the-app">Running the app<a class="anchor" aria-label="anchor" href="#running-the-app"></a>
</h2>
<p>Once you have your local version of the app, you can test your
developmental version of the app easily by running with the code in
<code>dev/run_dev.R</code>.</p>
<p>Notably, it runs the golem wrapper <code><a href="../reference/run_app.html">run_app()</a></code> function.
The default database to run the app has only one very small dataset,
corresponding to a subset of pbmc3k dataset. If you want to test it on
other datasets, check out the <a href="database.html">Database
vignette</a>.</p>
<p>As the default dataset is very small, it is good practice to also
test the app on a bigger dataset, to make sure that it is not lagging
when going up to scale.</p>
</div>
<div class="section level2">
<h2 id="general-structure">General structure<a class="anchor" aria-label="anchor" href="#general-structure"></a>
</h2>
<div class="section level3">
<h3 id="generalities">Generalities<a class="anchor" aria-label="anchor" href="#generalities"></a>
</h3>
<p>The app follows the structure proposed by the R package <a href="https://thinkr-open.github.io/golem/" class="external-link">golem</a> and their
associated <a href="https://engineering-shiny.org/" class="external-link">book</a> on
developing production-grade Shiny Apps.</p>
<p>This impacts the structure of the app, as it means that:</p>
<ul>
<li>the app is built around the notion of <a href="https://engineering-shiny.org/build-app-golem.html#submodules-and-utility-functions" class="external-link">submodule
and utility functions</a>
</li>
<li>the app is <a href="https://engineering-shiny.org/structuring-project.html?q=package#shiny-app-as-a-package" class="external-link">built
as an R package</a> (also check out <a href="https://rstudio.github.io/cheatsheets/html/package-development.html" class="external-link">package
development doc</a>)</li>
</ul>
</div>
<div class="section level3">
<h3 id="description-of-the-repository">Description of the repository<a class="anchor" aria-label="anchor" href="#description-of-the-repository"></a>
</h3>
<p>Here is the general structure of the repository:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="ex">├──</span> app.R               <span class="co"># file with script to launch the app when deployed on the server (RShiny)</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a><span class="ex">├──</span> data                <span class="co"># folder containing datasets available in the package (R packages)</span></span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a><span class="ex">├──</span> DESCRIPTION         <span class="co"># file with metadata (R packages)</span></span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a><span class="ex">├──</span> dev                 <span class="co"># folder with scripts to run when developping the app (golem)</span></span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a><span class="ex">├──</span> docs                <span class="co"># folder for (pkgdown)</span></span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a><span class="ex">├──</span> inst                <span class="co"># folder with arbitrary additional files (R packages) </span></span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a><span class="ex">├──</span> LICENSE.md          <span class="co"># LICENSE of the app (R package)</span></span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a><span class="ex">├──</span> man                 <span class="co"># folder with documentation of the package (R packages)</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a><span class="ex">├──</span> cache         <span class="co"># folder containing the cache (RShiny)</span></span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a><span class="ex">├──</span> NAMESPACE           <span class="co"># file with import/export to make package self-contained (R packages)</span></span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="ex">├──</span> NEWS.md             <span class="co"># file to summarize updates made to the package (R packages)</span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="ex">├──</span> _pkgdown.yml        <span class="co"># file with configuration of pkgdown (pkgdown)</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="ex">├──</span> presentation        <span class="co"># folder containing pdf presentation of the app</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="ex">├──</span> R                   <span class="co"># folder with all R code (R packages)</span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="ex">├──</span> README.md           <span class="co"># README file (R packages)</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="ex">├──</span> renv                <span class="co"># folder with renv libraries (renv)</span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="ex">├──</span> renv.lock           <span class="co"># file with name and version of packages (renv)</span></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a><span class="ex">├──</span> singlecellviz.Rproj <span class="co"># defines the R project of the app</span></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a><span class="ex">├──</span> tests               <span class="co"># folder containing automatic tests (testthat)</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a><span class="ex">└──</span> vignettes           <span class="co"># folder containing documentation (R packages)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="description-of-r-scripts">Description of <code>R/</code> scripts<a class="anchor" aria-label="anchor" href="#description-of-r-scripts"></a>
</h3>
<p>Here is a description of scripts developed for the app:</p>
<ul>
<li>
<code>app_config.R</code> contains function for golem usage</li>
<li>
<code>app_ui.R</code> and <code>app_server.R</code> contains
respectively the ui and server main code of the app (this is where each
module function is called)</li>
<li>
<code>mod_*.R</code> contains independent code parts of the app,
there is one for each tab of the app, and for some other features like
choosing the dataset or downloading it</li>
<li>
<code>fct_*.R</code> contains useful common functions for example
for handling plots, tables, or for adding new datasets</li>
<li>
<code>golem_utils_*.R</code> contains general utility functions
relative to ui or server handling</li>
<li>
<code>R6.R</code> contains the definition of the DATA class (see
section <a href="#common_data-variable">COMMON_DATA variable</a>)</li>
<li>
<code>run_app.R</code> contains golem wrapper of
<code>shinyApp()</code> function to run the app.</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="create-a-new-module">Create a new module<a class="anchor" aria-label="anchor" href="#create-a-new-module"></a>
</h2>
<p>To create a new module, run
<code>golem::add_module(name = "your_new_module_name", with_test = TRUE)</code>,
it will create the R scripts in the <code>R/</code> folder, as well as
tests in the <code>tests</code> folder (see <a href="https://engineering-shiny.org/build-yourself-safety-net.html#testing-the-business-logic" class="external-link">golem
doc</a> for more information).</p>
<p>You can add <code>module_*_ui()</code> and
<code>module_*_server()</code> functions respectively to
<code>app_ui.R</code> and <code>app_server.R</code>.</p>
<p>Follow <a href="https://engineering-shiny.org/structuring-project.html?q=petit%20r#using-shiny-modules" class="external-link">golem
doc</a> and <a href="https://mastering-shiny.org/scaling-modules.html" class="external-link">Shiny doc</a>
for more technical information on how to develop modules.</p>
<p>In this app, there are some objects you might need when developing a
new module. The following sections (<a href="#studies-variable">studies
variable</a>, <a href="#r-variable">r variable</a> and <a href="#common_data-variable">COMMON_DATA variable</a>) describe these
objects and their usage.</p>
<div class="section level3">
<h3 id="studies-variable">studies variable<a class="anchor" aria-label="anchor" href="#studies-variable"></a>
</h3>
<p>Modules might need to have access to some summary information of all
datasets. <code>studies</code> is the data.frame object for that. It is
structured like so:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/structure.html" class="external-link">structure</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"small example"</span>, </span>
<span>               output <span class="op">=</span> <span class="st">"extdata/small_example/tiledb"</span>, </span>
<span>               rds <span class="op">=</span> <span class="st">"extdata/small_example/small_example.rds"</span>, </span>
<span>               description <span class="op">=</span> <span class="st">"Dataset of Peripheral Blood Mononuclear Cells (PBMC) subsetted for Mk and DC cells. Freely available from 10X Genomics."</span>, </span>
<span>               doi <span class="op">=</span> <span class="st">"10.1038/ncomms14049"</span>, </span>
<span>               date <span class="op">=</span> <span class="st">"16/01/2017"</span>, </span>
<span>               nsamples <span class="op">=</span> <span class="fl">1L</span>, </span>
<span>               nfeatures <span class="op">=</span> <span class="fl">100L</span>, </span>
<span>               ncells <span class="op">=</span> <span class="fl">46L</span><span class="op">)</span>, </span>
<span>          class <span class="op">=</span> <span class="st">"data.frame"</span>, row.names <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="op">-</span><span class="fl">1L</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>As you can notice, it has a similar structure than the file given as
input of <code><a href="../reference/run_app.html">run_app()</a></code> (described in section <a href="#running-the-app">Running the app</a>). This is because the input
file given to <code><a href="../reference/run_app.html">run_app()</a></code> is read, and saved in the variable
<code>studies</code>.</p>
<p>To get access to it in a module just add the line of code in your
module:</p>
<pre><code><span><span class="va">studies</span> <span class="op">&lt;-</span> <span class="fu">get_golem_options</span><span class="op">(</span><span class="st">"studies"</span><span class="op">)</span></span></code></pre>
<p>For more information about how this works, check out <a href="https://engineering-shiny.org/golem.html?q=get_golem_options#run_app.r" class="external-link">golem
doc</a>.</p>
</div>
<div class="section level3">
<h3 id="r-variable">r variable<a class="anchor" aria-label="anchor" href="#r-variable"></a>
</h3>
<p>Modules might have the <code>r</code> object as parameter. It is a
global reactiveValues (see <a href="http://rstudio.github.io/shiny/reference/reactiveValues.html" class="external-link">Shiny</a>
and <a href="https://engineering-shiny.org/structuring-project.html?q=petit%20r#b.-the-strat%C3%A9gie-du-petit-r" class="external-link">golem</a>
doc). It is a special list with elements:</p>
<ul>
<li>
<code>tabs</code>, the name of the current tab in use</li>
<li>
<code>selected_study</code>, the number of the current selected
study</li>
</ul>
<p>It is a way to share information across otherwise independent
modules. The particularity of reactiveValues objects is that every time
the object gets updated, the parts of code that are dependent on them
get recomputed. So you might need to use:</p>
<ul>
<li>
<code>r$selected_study</code> if the output of a function is
dependent on the dataset</li>
<li>
<code>r$tabs</code> if you only want to update an output when on a
specific tab</li>
</ul>
</div>
<div class="section level3">
<h3 id="common_data-variable">COMMON_DATA variable<a class="anchor" aria-label="anchor" href="#common_data-variable"></a>
</h3>
<p>Modules might have the <code>COMMON_DATA</code> object as parameter.
It is a R6 object (see <a href="https://r6.r-lib.org/articles/Introduction.html" class="external-link">R6</a> and <a href="https://engineering-shiny.org/structuring-project.html?q=petit%20r#c.-the-strat%C3%A9gie-du-grand-r6" class="external-link">golem</a>
doc).</p>
<p>It contains the public methods:</p>
<ul>
<li>
<code>output</code>, the value of the uri of the current study</li>
<li>
<code>tabs_updated</code>, a list of value of the latest study shown
for each tab</li>
</ul>
<p>and the active methods:</p>
<ul>
<li>
<code>experiment</code>, returns an opened SOMA</li>
<li>
<code>groups</code>, returns the name of available groups, which
would be the equivalent of Seurat Assays (e.g. RNA)</li>
<li>
<code>arrays</code>, returns the name of available arrays, which
would be the equivalent of Seurat slots (e.g. count)</li>
<li>
<code>markers</code>, returns the name of available
<code>markers</code> tables</li>
<li>
<code>comparison</code>, returns the name of available
<code>comparison</code> tables</li>
</ul>
<p>The particularity of a R6 object is that if it modified inside of a
function, the modified value is kept outside the function when it is
called. So if you develop a module and need some data to be passed to
other modules, without the need for reactivity, you will likely have to
use the <code>COMMON_DATA</code> object.</p>
</div>
</div>
<div class="section level2">
<h2 id="good-pratices">Good pratices<a class="anchor" aria-label="anchor" href="#good-pratices"></a>
</h2>
<p>To develop the app efficiently, there are some good practice that
<strong>need</strong> to be followed. They are presented in the
following sections. They are all explained in more details in the golem
documentation, but the following sections describe the major points to
keep in mind when developping.</p>
<div class="section level3">
<h3 id="using-git">Using git<a class="anchor" aria-label="anchor" href="#using-git"></a>
</h3>
<div class="section level4">
<h4 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h4>
<p>Git is a version control system used to track changes made to the
code over time. It is helpful to:</p>
<ul>
<li>revert/compare with previous versions</li>
<li>understand who made changes and why (with commit messages)</li>
<li>manage conflicts when various changes were made to the code</li>
</ul>
<p>It is different from github, which is a git platform service to
create, store and manage code. This is the place where you can share
code to collaborate, as well as create, assign and track issues, bugs
and feature requests.</p>
</div>
<div class="section level4">
<h4 id="usage-in-practice">Usage in practice<a class="anchor" aria-label="anchor" href="#usage-in-practice"></a>
</h4>
<p>You can pull and push new versions of the app on <a href="https://github.com/metzger-chambon/singlecellviz" class="external-link">github</a>.</p>
<p>When you locally make a change in a file and want to apply the
changes on github, you need to run the commands (in Terminal, and in the
local folder of the app) in the following order:</p>
<ul>
<li>
<code>git add $FILE</code>: add the changes in the file</li>
<li>
<code>git commit -m $MESSAGE</code>: commit the changes</li>
<li>
<code>git push</code>: push commits on github (you must have the
rights to do so on the repository)</li>
</ul>
<p>When doing a lot of changes, it is good practice to create a new
branch (<code>git branch $BRANCHNAME</code>), and work on it
(<code>git checkout $BRANCHNAME</code>). When all changes are made and
working, you can merge the main and new branch
(<code>git checkout master</code> then,
<code>git merge $BRANCHNAME</code>).</p>
<p>Read the related <a href="https://engineering-shiny.org/version-control.html?q=git#git-integration" class="external-link">golem
documentation</a>.</p>
<p>To practice and learn more about git: <a href="https://www.w3schools.com/git/default.asp" class="external-link uri">https://www.w3schools.com/git/default.asp</a>.</p>
</div>
</div>
<div class="section level3">
<h3 id="using-renv">Using renv<a class="anchor" aria-label="anchor" href="#using-renv"></a>
</h3>
<p>renv is a R package to create reproducible environments for R
projects. Each R project has its own independent collection of packages
with specific versions.</p>
<p>Basically:</p>
<ul>
<li>to check if <code>renv.lock</code> is up-to-date, run
<code><a href="https://rstudio.github.io/renv/reference/status.html" class="external-link">renv::status()</a></code>
</li>
<li>to restore an environment from the current <code>renv.lock</code>,
run <code><a href="https://rstudio.github.io/renv/reference/restore.html" class="external-link">renv::restore()</a></code>
</li>
<li>to update it, run <code><a href="https://rstudio.github.io/renv/reference/snapshot.html" class="external-link">renv::snapshot()</a></code>
</li>
</ul>
<p>Check out <a href="https://rstudio.github.io/renv/articles/renv.html" class="external-link">renv</a> and <a href="https://engineering-shiny.org/build-yourself-safety-net.html?q=renv#b.-using-renv" class="external-link">golem
doc</a> for more information.</p>
</div>
</div>
<div class="section level2">
<h2 id="create-a-new-version-release">Create a new version release<a class="anchor" aria-label="anchor" href="#create-a-new-version-release"></a>
</h2>
<p>You’ve made changes to the app, and it should be released as a new
version of the app? Follow (at least) these steps:</p>
<ul>
<li>run <code>run_dev()</code> one last time and make sure that the
whole app works as expected, also on bigger datasets</li>
<li>document the changes made in the code and vignettes</li>
<li>update the DESCRIPTION file with
<code><a href="https://thinkr-open.github.io/attachment/reference/att_amend_desc.html" class="external-link">attachment::att_amend_desc()</a></code> if needed</li>
<li>run <code><a href="https://devtools.r-lib.org/reference/check.html" class="external-link">devtools::check()</a></code>, and make sure you don’t have any
errors. One warning about the size of files in
<code>singlecellviz/inst/extdata/small_example/tiledb/</code> is yet not
resolved. It is not a problem as long as the package does not go on
CRAN.</li>
<li>run <code>golem::set_golem_version("X.X.X")</code> with your new
version numbers</li>
<li>describe changes in <code>NEWS.md</code>
</li>
</ul>
<p>Finally, with git:</p>
<ul>
<li>add and commit your last changes</li>
<li>merge your changes with master</li>
<li>push your new release to github</li>
<li>give it a tag
(<code>git tag -a vX.X.X -m "version X.X.X"</code>)</li>
<li>push the tag (<code>git push origin tag</code>)</li>
</ul>
<p>Golem doc provides some more <a href="https://engineering-shiny.org/appendix-a---use-case-building-an-app-from-start-to-finish.html?q=check#before-deployment-checklist-1" class="external-link">things
to check checklist</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Valentine Gilbart.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
