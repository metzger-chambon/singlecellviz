<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>SingleCellViz doc - Development</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">SingleCellViz doc</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./usage.html"> 
<span class="menu-text">Usage</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./development.html" aria-current="page"> 
<span class="menu-text">Development</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./deployment.html"> 
<span class="menu-text">Deployment</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#installation" id="toc-installation" class="nav-link active" data-scroll-target="#installation"><span class="header-section-number">1</span> Installation</a></li>
  <li><a href="#structure" id="toc-structure" class="nav-link" data-scroll-target="#structure"><span class="header-section-number">2</span> Structure</a>
  <ul class="collapse">
  <li><a href="#generalities" id="toc-generalities" class="nav-link" data-scroll-target="#generalities"><span class="header-section-number">2.1</span> Generalities</a></li>
  <li><a href="#description-of-the-repository" id="toc-description-of-the-repository" class="nav-link" data-scroll-target="#description-of-the-repository"><span class="header-section-number">2.2</span> Description of the repository</a></li>
  <li><a href="#description-of-r-scripts" id="toc-description-of-r-scripts" class="nav-link" data-scroll-target="#description-of-r-scripts"><span class="header-section-number">2.3</span> Description of <code>R/</code> scripts</a></li>
  </ul></li>
  <li><a href="#modules-and-functions" id="toc-modules-and-functions" class="nav-link" data-scroll-target="#modules-and-functions"><span class="header-section-number">3</span> Modules and functions</a>
  <ul class="collapse">
  <li><a href="#description-of-existing-modules" id="toc-description-of-existing-modules" class="nav-link" data-scroll-target="#description-of-existing-modules"><span class="header-section-number">3.1</span> Description of existing modules</a></li>
  <li><a href="#description-of-existing-functions-utils" id="toc-description-of-existing-functions-utils" class="nav-link" data-scroll-target="#description-of-existing-functions-utils"><span class="header-section-number">3.2</span> Description of existing functions / utils</a></li>
  <li><a href="#create-a-new-module" id="toc-create-a-new-module" class="nav-link" data-scroll-target="#create-a-new-module"><span class="header-section-number">3.3</span> Create a new module</a></li>
  <li><a href="#reactivevalue-object-r" id="toc-reactivevalue-object-r" class="nav-link" data-scroll-target="#reactivevalue-object-r"><span class="header-section-number">3.4</span> reactiveValue object, r</a></li>
  <li><a href="#r6-object-common_data" id="toc-r6-object-common_data" class="nav-link" data-scroll-target="#r6-object-common_data"><span class="header-section-number">3.5</span> R6 object, COMMON_DATA</a></li>
  </ul></li>
  <li><a href="#database" id="toc-database" class="nav-link" data-scroll-target="#database"><span class="header-section-number">4</span> Database</a>
  <ul class="collapse">
  <li><a href="#tiledb-soma" id="toc-tiledb-soma" class="nav-link" data-scroll-target="#tiledb-soma"><span class="header-section-number">4.1</span> TileDB-SOMA</a></li>
  <li><a href="#rds-object" id="toc-rds-object" class="nav-link" data-scroll-target="#rds-object"><span class="header-section-number">4.2</span> rds object</a></li>
  <li><a href="#adding-a-new-dataset" id="toc-adding-a-new-dataset" class="nav-link" data-scroll-target="#adding-a-new-dataset"><span class="header-section-number">4.3</span> Adding a new dataset</a>
  <ul class="collapse">
  <li><a href="#cleaning-the-seurat-object" id="toc-cleaning-the-seurat-object" class="nav-link" data-scroll-target="#cleaning-the-seurat-object"><span class="header-section-number">4.3.1</span> Cleaning the Seurat object</a></li>
  <li><a href="#create-marker-and-comparison-tables" id="toc-create-marker-and-comparison-tables" class="nav-link" data-scroll-target="#create-marker-and-comparison-tables"><span class="header-section-number">4.3.2</span> Create marker and comparison tables</a></li>
  <li><a href="#creating-the-rds" id="toc-creating-the-rds" class="nav-link" data-scroll-target="#creating-the-rds"><span class="header-section-number">4.3.3</span> Creating the rds</a></li>
  <li><a href="#creating-config.yaml" id="toc-creating-config.yaml" class="nav-link" data-scroll-target="#creating-config.yaml"><span class="header-section-number">4.3.4</span> Creating config.yaml</a></li>
  <li><a href="#creating-tiledb" id="toc-creating-tiledb" class="nav-link" data-scroll-target="#creating-tiledb"><span class="header-section-number">4.3.5</span> Creating tiledb</a></li>
  <li><a href="#updating-the-summary" id="toc-updating-the-summary" class="nav-link" data-scroll-target="#updating-the-summary"><span class="header-section-number">4.3.6</span> Updating the summary</a></li>
  <li><a href="#making-the-change-effective-online" id="toc-making-the-change-effective-online" class="nav-link" data-scroll-target="#making-the-change-effective-online"><span class="header-section-number">4.3.7</span> Making the change effective online</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#good-pratices" id="toc-good-pratices" class="nav-link" data-scroll-target="#good-pratices"><span class="header-section-number">5</span> Good pratices</a>
  <ul class="collapse">
  <li><a href="#git-mandatory" id="toc-git-mandatory" class="nav-link" data-scroll-target="#git-mandatory"><span class="header-section-number">5.1</span> Git (mandatory)</a>
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">5.1.1</span> Introduction</a></li>
  <li><a href="#usage-in-practice" id="toc-usage-in-practice" class="nav-link" data-scroll-target="#usage-in-practice"><span class="header-section-number">5.1.2</span> Usage in practice</a></li>
  </ul></li>
  <li><a href="#renv-mandatory" id="toc-renv-mandatory" class="nav-link" data-scroll-target="#renv-mandatory"><span class="header-section-number">5.2</span> renv (mandatory)</a></li>
  <li><a href="#testthat-optional" id="toc-testthat-optional" class="nav-link" data-scroll-target="#testthat-optional"><span class="header-section-number">5.3</span> testthat (optional)</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/metzger-chambon/singlecellviz/edit/main/development.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/metzger-chambon/singlecellviz/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Development</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><em>NB: The following documentation assumes you have basic notions of how to build a RShiny app. Follow the documentations of <a href="https://shiny.posit.co/">RShiny</a> and <a href="https://mastering-shiny.org/">Mastering Shiny</a> for more explanations on Shiny, and for some practical examples.</em></p>
<section id="installation" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Installation</h1>
<p>Check the README.md of <a href="https://github.com/metzger-chambon/singlecellviz">SingleCellViz</a> to install the app locally for development. You will need to have the database locally as well. TODO maybe have a small example for testing purpose</p>
<p>Once you have your local version of the app, you can run it with the code in <code>dev/run_dev.R</code>.</p>
</section>
<section id="structure" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Structure</h1>
<section id="generalities" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="generalities"><span class="header-section-number">2.1</span> Generalities</h2>
<p>The app follows the structure proposed by the R package <a href="https://thinkr-open.github.io/golem/">golem</a> and their associated <a href="https://engineering-shiny.org/">documentation</a> on developing production-grade Shiny Apps.</p>
<p>In practice, this means that it uses shiny modules to separate the app code in smaller parts. The modules are under <code>R/mod_*.R</code>, there is one for each tab of the app, and for some other features like choosing the dataset <code>R/mod_dataset.R</code> or downloading it <code>R/mod_download.R</code>. Moreover, some useful common functions are under <code>R/fct_*.R</code>, for example, for generating the plots and tables.</p>
<p><em>NB: Although the app follows golem guidelines, it cannot be built like an R package directly as it is dependent on large datasets that cannot be saved into a package.</em></p>
</section>
<section id="description-of-the-repository" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="description-of-the-repository"><span class="header-section-number">2.2</span> Description of the repository</h2>
<p>Here is the general structure of the repository:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> app.R</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> data</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── dataset_summary.txt</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── db</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> └── script</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> DESCRIPTION</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> dev</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── 01_start.R</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── 02_dev.R</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── 03_deploy.R</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── config_attachment.yaml</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> └── run_dev.R</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> doc</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="ex">├──</span> deployment.Rmd</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="ex">├──</span> development.Rmd</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="ex">└──</span> usage.Rmd</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> inst</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── app</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── golem-config.yml</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> └── WORDLIST</span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> LICENSE</span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> LICENSE.md</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> man</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── figures</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> └── run_app.Rd</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> NAMESPACE</span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> NEWS.md</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> R</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── app_config.R</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── app_server.R</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── app_ui.R</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── _disable_autoload.R</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── fct_<span class="pp">*</span>.R</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── golem_utils_server.R</span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── golem_utils_ui.R</span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── mod_<span class="pp">*</span>.R</span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── R6.R</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> └── run_app.R</span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> README.md</span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> README.Rmd</span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> renv</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── activate.R</span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── settings.json</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> └── staging</span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> renv.lock</span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> singlecellviz.Rproj</span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a><span class="ex">├──</span> tests</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── spelling.R</span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> ├── testthat</span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a><span class="ex">│&nbsp;&nbsp;</span> └── testthat.R</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here is a quick description of some important content inside of the app repository:</p>
<ul>
<li><code>app.R</code> file contains code to launch the app when deployed on the server (see <a href="https://engineering-shiny.org/deploy.html#deploying-apps-with-golem">golem doc</a>)</li>
<li><code>data</code> folder contains the file <code>dataset_summary.txt</code> that describes all datasets for the app, the folder <code>db</code> with subfolders for each dataset, and the folder <code>script</code> with some useful scripts to add datasets (see the section called <a href="#adding-a-new-dataset">Adding a new dataset</a>)</li>
<li><code>doc</code> folder contains some documentation about the app</li>
<li><code>NEWS.md</code> file contains all updates made to the app</li>
<li><code>R</code> folder contains all R scripts for the app to work (see the section called <a href="#description-of-r-scripts">Description of <code>R/</code> scripts</a>)</li>
<li><code>renv</code> folder and <code>renv.lock</code> file are generated from using the renv library (see the section called <a href="#renv-mandatory">renv (mandatory)</a>)</li>
<li><code>tests</code> folder contains automatic tests of the app behavior (see <a href="https://engineering-shiny.org/build-app-golem.html?q=test#add-tests">golem doc</a>)</li>
</ul>
<p><em>NB: for more information about other folders specific to golem structure (e.g.&nbsp;<code>inst</code>, <code>dev</code>, <code>man</code>), check out the <a href="https://engineering-shiny.org/golem.html?q=man#understanding-golem-app-structure">golem documentation</a>.</em></p>
</section>
<section id="description-of-r-scripts" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="description-of-r-scripts"><span class="header-section-number">2.3</span> Description of <code>R/</code> scripts</h2>
<ul>
<li><code>run_app.R</code> contains the function to run the app for the server, it is also where the cache directory is defined</li>
<li><code>app_config.R</code> TODO</li>
<li><code>app_ui.R</code> and <code>app_server.R</code> contains respectively the ui and server main code of the app (this is where each module function is called)</li>
<li><code>mod_*.R</code> contains independent code parts of the app, there is one for each tab of the app, and for some other features like choosing the dataset or downloading it (see the section called [Development of modules] for more information)</li>
<li><code>fct_*.R</code> contains useful common functions for example for handling plots or tables</li>
<li><code>golem_utils_*.R</code> contains general utility functions relative to ui or server handling</li>
<li><code>R6.R</code> contains the definition of the DATA class (see the section called <a href="#r6-object-common_data">R6 object, COMMON_DATA</a> for more information)</li>
</ul>
</section>
</section>
<section id="modules-and-functions" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Modules and functions</h1>
<section id="description-of-existing-modules" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="description-of-existing-modules"><span class="header-section-number">3.1</span> Description of existing modules</h2>
<ul>
<li><code>mod_</code> TODO</li>
<li></li>
</ul>
</section>
<section id="description-of-existing-functions-utils" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="description-of-existing-functions-utils"><span class="header-section-number">3.2</span> Description of existing functions / utils</h2>
<ul>
<li><code>fct_</code> TODO also give link to this sections in the generalies for example</li>
<li></li>
</ul>
</section>
<section id="create-a-new-module" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="create-a-new-module"><span class="header-section-number">3.3</span> Create a new module</h2>
<p>To create a new module, run <code>golem::add_module(name = "your_new_module_name", with_test = TRUE)</code>, it will create the R scripts in the <code>R/</code> folder, as well as tests in the <code>tests</code> folder (see the section called <a href="#testthat-optional">testthat (optional)</a> for more information on tests).</p>
<p>You can add the <code>module_*_ui.R</code> and <code>module_*_server.R</code> functions to respectively <code>app_ui.R</code> and <code>app_server.R</code>.</p>
<p>Follow <a href="https://engineering-shiny.org/structuring-project.html?q=petit%20r#using-shiny-modules">golem doc</a> and <a href="https://mastering-shiny.org/scaling-modules.html">Shiny doc</a> for more practical information on how to develop modules.</p>
<p>In this app, there are two objects you might need when developing a new module : <code>r</code> and <code>COMMON_DATA</code>, the two following sections (<a href="#reactivevalue-object-r">reactiveValue object, r</a> and <a href="#r6-object-common_data">R6 object, COMMON_DATA</a>) describes these objects and their usage.</p>
</section>
<section id="reactivevalue-object-r" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="reactivevalue-object-r"><span class="header-section-number">3.4</span> reactiveValue object, r</h2>
<p>Modules might have the <code>r</code> object as parameter. It is a global reactiveValues (see <a href="http://rstudio.github.io/shiny/reference/reactiveValues.html">Shiny</a> and <a href="https://engineering-shiny.org/structuring-project.html?q=petit%20r#b.-the-strat%C3%A9gie-du-petit-r">golem</a> doc). It is a special list with elements:</p>
<ul>
<li><code>tabs</code>, the name of the current tab in use</li>
<li><code>selected_study</code>, the number of the current selected study</li>
</ul>
<p>The particularity of reactiveValues objects is that every time the object gets updated, the parts of code that are dependent on them gets recomputed. So if you might need to use:</p>
<ul>
<li><code>r$selected_study</code> if the output of a function is dependent on the dataset</li>
<li><code>r$tabs</code> if you only want to update an output when on a specific tab</li>
</ul>
</section>
<section id="r6-object-common_data" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="r6-object-common_data"><span class="header-section-number">3.5</span> R6 object, COMMON_DATA</h2>
<p>Modules might have the <code>COMMON_DATA</code> object as parameter. It is a R6 object (see <a href="https://r6.r-lib.org/articles/Introduction.html">R6</a> and <a href="https://engineering-shiny.org/structuring-project.html?q=petit%20r#c.-the-strat%C3%A9gie-du-grand-r6">golem</a> doc).</p>
<p>It contains the public methods:</p>
<ul>
<li><code>output</code>, the value of the uri of the current study</li>
<li><code>tabs_updated</code>, a list of value of the latest study shown for each tab</li>
</ul>
<p>and the active methods:</p>
<ul>
<li><code>experiment</code>, returns an opened SOMA</li>
<li><code>groups</code>, returns the name of available groups, which would be the equivalent of Seurat Assays (e.g.&nbsp;RNA)</li>
<li><code>arrays</code>, returns the name of available arrays, which would be the equivalent of Seurat slots (e.g.&nbsp;count)</li>
<li><code>markers</code>, returns the name of available <code>markers</code> tables</li>
<li><code>comparison</code>, returns the name of available <code>comparison</code> tables</li>
</ul>
<p>The particularity of R6 objects is that if it modified inside of a function, the modified value is kept outside the function when it is called. So if you develop a module and need some data to be passed to other modules, without the need for reactivity, you will likely have to use the <code>COMMON_DATA</code> object.</p>
</section>
</section>
<section id="database" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Database</h1>
<p>The app relies on a database, under the folder <code>data/db/</code> where each dataset has its own folder. For each dataset, there should be:</p>
<ul>
<li><code>config.yaml</code> file containing metadata about the dataset such as the title, the description, etc (see section <a href="#adding-a-new-dataset">Adding a new dataset</a>)</li>
<li><code>create_rds.R</code> file containing the script that cleans and process the original data into a compatible dataset for the app</li>
<li><code>${DATASET_NAME}.rds</code> file containing the Seurat object, the marker and comparison tables that the user will be able to directly download in the app</li>
<li><code>tiledb/</code> folder containing various folders and files corresponding to the tiledb database (this folder should not be modified manually)</li>
</ul>
<p>The following sections will describe the structure of the database (sections <a href="#tiledb-soma">TileDB-SOMA</a> and <a href="#rds-object">rds object</a>), and how to add a new dataset in the right format (section <a href="#adding-a-new-dataset">Adding a new dataset</a>).</p>
<section id="tiledb-soma" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="tiledb-soma"><span class="header-section-number">4.1</span> TileDB-SOMA</h2>
<p>The datasets are saved in in the format provided by <a href="https://single-cell-data.github.io/TileDB-SOMA/index.html">TileDB-SOMA</a>.</p>
<p>TileDB-SOMA is a R package developed to store and access single-cell data at scale. Indeed, when working with Seurat object, the whole object is loaded, even though only parts of it are needed (not all genes are going to be visualized for example).</p>
<p>In addition to the <a href="https://single-cell-data.github.io/TileDB-SOMA/articles/soma-objects.html">original TileDB-SOMA structure</a> for Seurat objects, the app adds on the two following SOMACollections:</p>
<ul>
<li><code>marker</code></li>
<li><code>comparison</code></li>
</ul>
<p>Both contains two tables:</p>
<ul>
<li><code>result</code>, the result of Seurat’s <code>FindAllMarkers</code> (for <code>marker</code>) or Seurat’s <code>FindMarkers</code> (for <code>comparison</code>)</li>
<li><code>aggrexpression</code>, the result of Seurat’s <code>AggregateExpression</code></li>
</ul>
</section>
<section id="rds-object" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="rds-object"><span class="header-section-number">4.2</span> rds object</h2>
<p>The rds object is the one that the user will be able to download in the app. It is a list of the following elements:</p>
<ul>
<li><code>seurat</code>, the Seurat object</li>
<li><code>marker</code>, a list with the table of <code>FindAllMarkers</code> and <code>AggregateExpression</code></li>
<li><code>comparison</code>, a list with the table of <code>FindMarkers</code> and <code>AggregateExpression</code></li>
</ul>
<p>It is created from the corresponding <code>create_rds.R</code> script, using functions in <code>data/script/process_seurat_obj.R</code>.</p>
</section>
<section id="adding-a-new-dataset" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="adding-a-new-dataset"><span class="header-section-number">4.3</span> Adding a new dataset</h2>
<p>Take a look at the <code>create_rds.R</code> and <code>config.yaml</code> of existing datasets to see how you can easily clean the Seurat object, create necessary tables and convert to TileDB-SOMA format. At the end, add the dataset to <code>data/dataset_summary.txt</code> by running <code>data/db/script/update_summary.R</code>.</p>
<p>For more explanation, read the following sections.</p>
<section id="cleaning-the-seurat-object" class="level3" data-number="4.3.1">
<h3 data-number="4.3.1" class="anchored" data-anchor-id="cleaning-the-seurat-object"><span class="header-section-number">4.3.1</span> Cleaning the Seurat object</h3>
<p>To add a new dataset you will need to clean the Seurat object, for example check that:</p>
<ul>
<li>there is no unnecessary columns in <code>@meta.data</code></li>
<li>that the columns in <code>@meta.data</code> are in the expected format (generally <code>numeric</code> or <code>factors</code>)</li>
<li>remove unnecessary elements in <code>@reductions</code></li>
<li>remove unnecessary elements in <code>@assays</code>, there should only be one at the end (typically <code>RNA</code>) which is the one used for the explore tab (for the DimPlot, VlnPlot, DotPlot)</li>
<li>remove <code>scale.data</code> of the <code>@assays</code> left (it is usually very heavy, and not useful for visualization, although you should keep it for running <code>AggregateExpression</code> which results is used for the <code>marker</code> and <code>comparison</code> heatmaps)</li>
</ul>
</section>
<section id="create-marker-and-comparison-tables" class="level3" data-number="4.3.2">
<h3 data-number="4.3.2" class="anchored" data-anchor-id="create-marker-and-comparison-tables"><span class="header-section-number">4.3.2</span> Create marker and comparison tables</h3>
<p>To ease the process of creating the tables, the functions <code>compute_marker</code> and <code>compute_comparison</code> have been developed. They are available in <code>data/script/process_seurat_obj.R</code>.</p>
<p>It takes as input a seurat object, and a list with markers/comparisons to compute. The parameters can also bethen be retrieved/saved in yaml format inside of the <code>config.yaml</code> (see section <a href="#creating-config.yaml">Creating config.yaml</a>).</p>
<p>For <code>compute_marker</code> the list is of the following format:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>optMarkers <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"CellType markers"</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">Ident =</span> <span class="st">"CellType"</span>,</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">FindAllMarkers =</span> <span class="fu">list</span>(<span class="at">only.pos =</span> <span class="cn">TRUE</span>,</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>                         <span class="at">min.pct =</span> <span class="fl">0.25</span>,</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>                         <span class="at">logfc.threshold =</span> <span class="fl">0.5</span>),</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">AggregateExpression =</span> <span class="fu">list</span>(<span class="at">assays =</span> <span class="st">"RNA"</span>,</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>                              <span class="at">slot =</span> <span class="st">"scale.data"</span>,</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>                              <span class="at">group.by =</span> <span class="fu">c</span>(<span class="st">"CellType"</span>, <span class="st">"orig.ident"</span>)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>                          )</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  ), </span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"CellType markers"</span>,</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It’s a list, where each element defines an instance of <code>FindAllMarkers</code> to run. Each element has a value:</p>
<ul>
<li><code>name</code>, a string being the name that will appear in the app</li>
<li><code>Ident</code>, a string being one of the Idents of the Seurat object to run <code>FindAllMarkers</code> on</li>
<li><code>FindAllMarkers</code>, a list with all possible parameters of <code>FindAllMarkers</code> function. Only the parameter <code>object</code> is given by default. The name of each element in the list is the name of parameters of the function, and its value is the value to give to the parameters.</li>
<li><code>AggregateExpression</code>, a list with all possible parameters of <code>AggregateExpression</code> function. Only the parameter <code>object</code> is given by default. The name of each element in the list is the name of parameters of the function, and its value is the value to give to the parameters.</li>
</ul>
<p>For <code>compute_comparison</code> the list is of the following format:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>optMarkers <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"First comparison"</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">subset =</span> <span class="fu">list</span>(</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">subset =</span> <span class="fu">substitute</span>(CellType <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Luminal C"</span>))</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>      ),</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">Ident =</span> <span class="st">"orig.ident"</span>,</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">FindMarkers =</span> <span class="fu">list</span>(<span class="at">ident.1 =</span> PTEN),</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">AggregateExpression =</span> <span class="fu">list</span>(<span class="at">assays =</span> <span class="st">"RNA"</span>,</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>                              <span class="at">slot =</span> <span class="st">"scale.data"</span>,</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>                              <span class="at">group.by =</span> <span class="fu">c</span>(<span class="st">"orig.ident"</span>, <span class="st">"CellType"</span>)</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>                          )</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  ), </span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Second comparison"</span>,</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>    ...</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It’s a list, where each element defines an instance of <code>FindMarkers</code> to run. Each element has a value:</p>
<ul>
<li><code>name</code>, a string being the name that will appear in the app</li>
<li><code>subset</code>, a list with all possible parameters of <code>subset</code> function. Only the parameter <code>x</code> is given by default. The name of each element in the list is the name of parameters of the function, and its value is the value to give to the parameters.</li>
<li><code>Ident</code>, a string being one of the Idents of the Seurat object to run <code>FindMarkers</code> on</li>
<li><code>FindMarkers</code>, a list with all possible parameters of <code>FindMarkers</code> function. Only the parameter <code>object</code> is given by default. The name of each element in the list is the name of parameters of the function, and its value is the value to give to the parameters.</li>
<li><code>AggregateExpression</code>, a list with all possible parameters of <code>AggregateExpression</code> function. Only the parameter <code>object</code> is given by default. The name of each element in the list is the name of parameters of the function, and its value is the value to give to the parameters.</li>
</ul>
<p>It gives as output a list of two elements: - <code>table</code> being the result of <code>FindAllMarkers</code> or <code>FindMarkers</code> - <code>aggrexpression</code> being the results of <code>AggregateExpression</code>.</p>
</section>
<section id="creating-the-rds" class="level3" data-number="4.3.3">
<h3 data-number="4.3.3" class="anchored" data-anchor-id="creating-the-rds"><span class="header-section-number">4.3.3</span> Creating the rds</h3>
<p>The <code>rds</code> object structure is described in <a href="#rds-object">rds object</a>. If you followed the previous sections, you only have to create a list like so:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">list</span>(<span class="at">seuratObj =</span> x, </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">markers =</span> y, </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">comparison =</span> z)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>where <code>x</code> is the cleaned Seurat object, <code>y</code> is the result of <code>compute_marker</code> and <code>z</code> is the result of <code>compute_comparison</code>.</p>
</section>
<section id="creating-config.yaml" class="level3" data-number="4.3.4">
<h3 data-number="4.3.4" class="anchored" data-anchor-id="creating-config.yaml"><span class="header-section-number">4.3.4</span> Creating config.yaml</h3>
<p>You then need to save this list under <code>data/db/${DATASET_NAME}/${DATASET_NAME}.rds</code>, and create the <code>config.yaml</code>, that has the following structure, and at least the following elements:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">title:</span> <span class="st">'Some string as title of the dataset'</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="ex">rds:</span> path/of/the/rds/object</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="ex">output_folder:</span> path/of/the/tiledb/folder</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="ex">description:</span> <span class="st">'Some string describing the dataset'</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="ex">doi:</span> <span class="st">'Some string being a doi'</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="ex">date:</span> DD/MM/YYYY</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="ex">force:</span> boolean <span class="er">(</span><span class="fu">true</span> or false<span class="kw">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Optionally, you can add the parameters used for <code>compute_marker</code> and <code>compute_comparison</code> in this format:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">markers:</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">-</span> name: CellType markers</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="ex">Ident:</span> CellType</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="ex">FindAllMarkers:</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="ex">only.pos:</span> yes</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="ex">AggregateExpression:</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="ex">assays:</span> RNA</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="ex">slot:</span> scale.data</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="ex">group.by:</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="ex">-</span> CellType</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="ex">-</span> orig.ident</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This can be achieved with the code <code>cat(yaml::as.yaml(optMarkers))</code> where <code>optMarkers</code> is the list of the parameters.</p>
</section>
<section id="creating-tiledb" class="level3" data-number="4.3.5">
<h3 data-number="4.3.5" class="anchored" data-anchor-id="creating-tiledb"><span class="header-section-number">4.3.5</span> Creating tiledb</h3>
<p>The TileDB-SOMA database can be easily created with the function <code>populate_tiledb</code> of <code>data/script/populate_tiledb.R</code>.</p>
<p>It takes as input the path of the <code>config.yaml</code> file, and gives no output. It creates the TileDB-SOMA database based on the with the <code>name</code>, <code>rds</code> and <code>output_folder</code> elements given in <code>config.yaml</code> (see section <a href="#creating-config.yaml">Creating config.yaml</a>).</p>
</section>
<section id="updating-the-summary" class="level3" data-number="4.3.6">
<h3 data-number="4.3.6" class="anchored" data-anchor-id="updating-the-summary"><span class="header-section-number">4.3.6</span> Updating the summary</h3>
<p>The <code>dataset_summary.txt</code> file can be easily updated with the code in <code>data/script/update_summary.R</code>. It automatically searches for all available <code>config.yaml</code> in each subfolder of <code>data/db/</code>. It retrieves the mandatory elements (see section <a href="#creating-config.yaml">Creating config.yaml</a>), summarizes them in a table, to finally write it in <code>dataset_summary.txt</code>.</p>
<p>It can also be used to modify some information in <code>dataset_summary.txt</code>. For example to change a description, first modify the corresponding <code>config.yaml</code> and then re-run <code>data/script/update_summary.R</code>.</p>
</section>
<section id="making-the-change-effective-online" class="level3" data-number="4.3.7">
<h3 data-number="4.3.7" class="anchored" data-anchor-id="making-the-change-effective-online"><span class="header-section-number">4.3.7</span> Making the change effective online</h3>
<p>This describes how to add a database locally. You should then check that everything is working fine. Once you are ready, you should follow the steps written in the <a href="doc/deployment.html">deployment documentation</a>.</p>
</section>
</section>
</section>
<section id="good-pratices" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Good pratices</h1>
<p>To develop the app efficiently, there are some good practice that need to be followed. They are presented in the following sections.</p>
<section id="git-mandatory" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="git-mandatory"><span class="header-section-number">5.1</span> Git (mandatory)</h2>
<section id="introduction" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">5.1.1</span> Introduction</h3>
<p>Git is a version control system used to track changes made to the code over time. It is helpful to:</p>
<ul>
<li>revert/compare with previous versions</li>
<li>understand who made changes and why (with commit messages)</li>
<li>manage conflicts when various changes were made to the code</li>
</ul>
<p>It is different from github, which is a git platform service to create, store and manage code. This is the place where you can share code to collaborate, as well as create, assign and track issues, bugs and feature requests.</p>
</section>
<section id="usage-in-practice" class="level3" data-number="5.1.2">
<h3 data-number="5.1.2" class="anchored" data-anchor-id="usage-in-practice"><span class="header-section-number">5.1.2</span> Usage in practice</h3>
<p>You can pull and push new versions of the app via <a href="https://github.com/metzger-chambon/singlecellviz">github</a>. You must be a member of github’s metzger-chambon team to push to the repository.</p>
<p>When you locally make a change in a file and want to apply the changes on github, you need to run the commands (in Terminal, and in the local folder of the app) in the following order:</p>
<ul>
<li><code>git add $FILE</code>: add the changes in the file</li>
<li><code>git commit -m $MESSAGE</code>: commit the changes</li>
<li><code>git push</code>: push commits on github</li>
</ul>
<p>When doing a lot of changes, it is good practice to create a new branch (<code>git branch $BRANCHNAME</code>), and work on it (<code>git checkout $BRANCHNAME</code>), until all changes are made and working, in order to merge the main and new branch (<code>git checkout master</code> then, <code>git merge $BRANCHNAME</code>).</p>
<p>To practice and learn more about git: <a href="https://www.w3schools.com/git/default.asp" class="uri">https://www.w3schools.com/git/default.asp</a>.</p>
</section>
</section>
<section id="renv-mandatory" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="renv-mandatory"><span class="header-section-number">5.2</span> renv (mandatory)</h2>
<p>renv is a R package to create reproducible environments for R projects. Each project has its own independent collection of packages with specific versions.</p>
</section>
<section id="testthat-optional" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="testthat-optional"><span class="header-section-number">5.3</span> testthat (optional)</h2>
<p>testthat is a R package to deal with unitary tests. This is advised but not obligatory.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/metzger-chambon\.igbmc\.science\/SingleCellViz\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Metzger-Chambon, IGBMC</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/metzger-chambon/singlecellviz/edit/main/development.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/metzger-chambon/singlecellviz/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/metzger-chambon/singlecellviz">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://metzger-chambon.igbmc.science/SingleCellViz/">
      <i class="bi bi-link" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>